!function e(t,a,n){function o(s,c){if(!a[s]){if(!t[s]){var r="function"==typeof require&&require;if(!c&&r)return r(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[s]={exports:{}};t[s][0].call(d.exports,function(e){var a=t[s][1][e];return o(a||e)},d,d.exports,e,t,a,n)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,a){!function(t){"use strict";var a={maintenanceMode:null,cacheElements:function(){this.cache={$window:t(window),$body:t("body"),$switchMode:t("#qazana-switch-mode"),$goToEditLink:t("#qazana-go-to-edit-page-link"),$switchModeInput:t("#qazana-switch-mode-input"),$switchModeButton:t("#qazana-switch-mode-button"),$qazanaLoader:t(".qazana-loader"),$builderEditor:t("#qazana-editor"),$importButton:t("#qazana-import-template-trigger"),$importArea:t("#qazana-import-template-area"),$settingsForm:t("#qazana-settings-form"),$settingsTabsWrapper:t("#qazana-settings-tabs-wrapper"),$addNew:t(".post-type-qazana_library #wpbody-content .page-title-action:first, #qazana-template-library-add-new"),$addNewDialogHeader:t(".qazana-templates-modal__header"),$addNewDialogClose:t(".qazana-templates-modal__header__close-modal"),$addNewDialogContent:t("#qazana-new-template-dialog-content")},this.cache.$settingsFormPages=this.cache.$settingsForm.find(".qazana-settings-form-page"),this.cache.$activeSettingsPage=this.cache.$settingsFormPages.filter(".qazana-active"),this.cache.$settingsTabs=this.cache.$settingsTabsWrapper.children(),this.cache.$activeSettingsTab=this.cache.$settingsTabs.filter(".nav-tab-active")},toggleStatus:function(){var e=this.isQazanaMode();this.cache.$body.toggleClass("qazana-editor-active",e).toggleClass("qazana-editor-inactive",!e)},bindEvents:function(){var e=this;e.cache.$switchModeButton.on("click",function(a){if(a.preventDefault(),e.isQazanaMode())e.cache.$switchModeInput.val("");else{e.cache.$switchModeInput.val(!0);var n=t("#title");n.val()||n.val("Qazana #"+t("#post_ID").val()),wp.autosave&&wp.autosave.server.triggerSave(),e.animateLoader(),t(document).on("heartbeat-tick.autosave",function(){e.cache.$window.off("beforeunload.edit-post"),location.href=e.cache.$goToEditLink.attr("href")})}e.toggleStatus()}),e.cache.$addNew.on("click",function(t){t.preventDefault(),e.getNewTemplateModal().show()}),e.cache.$goToEditLink.on("click",function(){e.animateLoader()}),t("div.notice.qazana-message-dismissed").on("click","button.notice-dismiss",function(e){e.preventDefault(),t.post(ajaxurl,{action:"qazana_set_admin_notice_viewed",notice_id:t(this).closest(".qazana-message-dismissed").data("notice_id")})}),t("#qazana-clear-cache-button").on("click",function(e){e.preventDefault();var a=t(this);a.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"qazana_clear_cache",_nonce:a.data("nonce")}).done(function(){a.removeClass("loading").addClass("success")})}),t("#qazana-library-sync-button").on("click",function(e){e.preventDefault();var a=t(this);a.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"qazana_reset_library",_nonce:a.data("nonce")}).done(function(){a.removeClass("loading").addClass("success")})}),t("#qazana-replace-url-button").on("click",function(e){e.preventDefault();var a=t(this),n=a.parents("tr"),o=n.find('[name="from"]'),i=n.find('[name="to"]');a.removeClass("success").addClass("loading"),t.post(ajaxurl,{action:"qazana_replace_url",from:o.val(),to:i.val(),_nonce:a.data("nonce")}).done(function(e){a.removeClass("loading"),e.success&&a.addClass("success"),(new DialogsManager.Instance).createWidget("alert",{message:e.data}).show()})}),e.cache.$settingsTabs.on({click:function(e){e.preventDefault(),e.currentTarget.focus()},focus:function(){var t=location.href.replace(/#.*/,"");history.pushState({},"",t+this.hash),e.goToSettingsTabFromHash()}}),t(".qazana-rollback-button").on("click",function(e){e.preventDefault();var a=t(this);(new DialogsManager.Instance).createWidget("confirm",{headerMessage:QazanaAdminConfig.i18n.rollback_to_previous_version,message:QazanaAdminConfig.i18n.rollback_confirm,strings:{confirm:QazanaAdminConfig.i18n.yes,cancel:QazanaAdminConfig.i18n.cancel},onConfirm:function(){a.addClass("loading"),location.href=a.attr("href")}}).show()}),t(".qazana_css_print_method select").on("change",function(){var e=t(".qazana-css-print-method-description");e.hide(),e.filter('[data-value="'+t(this).val()+'"]').show()}).trigger("change")},init:function(){this.cacheElements(),this.bindEvents(),this.initTemplatesImport(),this.initNewTemplateDialog(),this.initMaintenanceMode(),this.goToSettingsTabFromHash(),this.roleManager.init(),this.extensionManager.init()},initNewTemplateDialog:function(){var e,t=this;t.getNewTemplateModal=function(){if(!e){var a=new DialogsManager.Instance;e=a.createWidget("lightbox",{id:"qazana-new-template-modal",className:"qazana-templates-modal",headerMessage:t.cache.$addNewDialogHeader,message:t.cache.$addNewDialogContent.children(),hide:{onButtonClick:!1},position:{my:"center",at:"center"},onReady:function(){DialogsManager.getWidgetType("lightbox").prototype.onReady.apply(this,arguments),t.cache.$addNewDialogClose.on("click",function(){e.hide()})}})}return e}},initTemplatesImport:function(){if(this.cache.$body.hasClass("post-type-qazana_library")){var e=this,a=e.cache.$importButton,n=e.cache.$importArea;e.cache.$formAnchor=t("h1"),t("#wpbody-content").find(".page-title-action:last").after(a),e.cache.$formAnchor.after(n),a.on("click",function(){t("#qazana-import-template-area").toggle()})}},initMaintenanceMode:function(){var t=e("qazana-admin/maintenance-mode");this.maintenanceMode=new t},isQazanaMode:function(){return!!this.cache.$switchModeInput.val()},animateLoader:function(){this.cache.$goToEditLink.addClass("qazana-animate")},goToSettingsTabFromHash:function(){var e=location.hash.slice(1);e&&this.goToSettingsTab(e)},goToSettingsTab:function(e){var t=this.cache.$settingsFormPages.filter("#"+e);if(t.length){this.cache.$activeSettingsPage.removeClass("qazana-active"),this.cache.$activeSettingsTab.removeClass("nav-tab-active");var a=this.cache.$settingsTabs.filter("#qazana-settings-"+e);t.addClass("qazana-active"),a.addClass("nav-tab-active"),this.cache.$settingsForm.attr("action","options.php#"+e),this.cache.$activeSettingsPage=t,this.cache.$activeSettingsTab=a}},roleManager:{selectors:{body:"qazana-role-manager",row:".qazana-role-row",label:".qazana-role-label",excludedIndicator:".qazana-role-excluded-indicator",excludedField:'input[name="qazana_exclude_user_roles[]"]',controlsContainer:".qazana-role-controls",toggleHandle:".qazana-role-toggle",arrowUp:"dashicons-arrow-up",arrowDown:"dashicons-arrow-down"},toggle:function(e){var t=this,a=e.closest(t.selectors.row),n=a.find(t.selectors.toggleHandle).find(".dashicons"),o=a.find(t.selectors.controlsContainer);o.toggleClass("hidden"),o.hasClass("hidden")?n.removeClass(t.selectors.arrowUp).addClass(t.selectors.arrowDown):n.removeClass(t.selectors.arrowDown).addClass(t.selectors.arrowUp),t.updateLabel(a)},updateLabel:function(e){var t=this,a=e.find(t.selectors.excludedIndicator),n=e.find(t.selectors.excludedField).is(":checked");n?a.html(a.data("excluded-label")):a.html(""),t.setAdvancedState(e,n)},setAdvancedState:function(e,a){var n=this;e.find('input[type="checkbox"]').not(n.selectors.excludedField).each(function(e,n){t(n).prop("disabled",a)})},bind:function(){var e=this;t(document).on("click",e.selectors.label+","+e.selectors.toggleHandle,function(a){a.stopPropagation(),a.preventDefault(),e.toggle(t(this))}).on("change",e.selectors.excludedField,function(){e.updateLabel(t(this).closest(e.selectors.row))})},init:function(){var e=this;t('body[class*="'+e.selectors.body+'"]').length&&(e.bind(),t(e.selectors.row).each(function(a,n){e.updateLabel(t(n))}))}},extensionManager:{selectors:{body:"qazana-extensions-manager",row:".qazana-extension-row",label:".qazana-extension-indicator",activedIndicator:".qazana-extension-active-indicator",activeWidgets:'input[name="qazana_extension-manage-widgets[]"]',controlsContainer:".qazana-extension-controls",toggleHandle:".qazana-extension-toggle",arrowUp:"dashicons-arrow-up",arrowDown:"dashicons-arrow-down"},toggle:function(e){var t=this,a=e.closest(t.selectors.row),n=a.find(t.selectors.toggleHandle).find(".dashicons"),o=a.find(t.selectors.controlsContainer);o.toggleClass("hidden"),o.hasClass("hidden")?n.removeClass(t.selectors.arrowUp).addClass(t.selectors.arrowDown):n.removeClass(t.selectors.arrowDown).addClass(t.selectors.arrowUp),t.updateLabel(a)},updateLabel:function(e){var t=this,a=e.find(t.selectors.activedIndicator),n=e.find(t.selectors.activeWidgets).is(":checked");n?a.html(a.data("label")):a.html(""),t.setAdvancedState(e,n)},setAdvancedState:function(e,a){var n=this;e.find('input[type="checkbox"]').not(n.selectors.activeWidgets).each(function(e,n){t(n).prop("disabled",a)})},bind:function(){var e=this;t(document).on("click",e.selectors.label+","+e.selectors.toggleHandle,function(a){a.stopPropagation(),a.preventDefault(),e.toggle(t(this))}).on("change",e.selectors.activeWidgets,function(){e.updateLabel(t(this).closest(e.selectors.row))})},init:function(){var e=this;t('body[class*="'+e.selectors.body+'"]').length&&(e.bind(),t(e.selectors.row).each(function(a,n){e.updateLabel(t(n))}))}}};t(function(){a.init()}),window.qazanaAdmin=a}(jQuery)},{"qazana-admin/maintenance-mode":2}],2:[function(e,t,a){var n;n=e("qazana-utils/view-module").extend({getDefaultSettings:function(){return{selectors:{modeSelect:".qazana_maintenance_mode_mode select",maintenanceModeTable:"#tab-maintenance_mode table",maintenanceModeDescriptions:".qazana-maintenance-mode-description",excludeModeSelect:".qazana_maintenance_mode_exclude_mode select",excludeRolesArea:".qazana_maintenance_mode_exclude_roles",templateSelect:".qazana_maintenance_mode_template_id select",editTemplateButton:".qazana-edit-template",maintenanceModeError:".qazana-maintenance-mode-error"},classes:{isEnabled:"qazana-maintenance-mode-is-enabled"}}},getDefaultElements:function(){var e={},t=this.getSettings("selectors");return e.$modeSelect=jQuery(t.modeSelect),e.$maintenanceModeTable=e.$modeSelect.parents(t.maintenanceModeTable),e.$excludeModeSelect=e.$maintenanceModeTable.find(t.excludeModeSelect),e.$excludeRolesArea=e.$maintenanceModeTable.find(t.excludeRolesArea),e.$templateSelect=e.$maintenanceModeTable.find(t.templateSelect),e.$editTemplateButton=e.$maintenanceModeTable.find(t.editTemplateButton),e.$maintenanceModeDescriptions=e.$maintenanceModeTable.find(t.maintenanceModeDescriptions),e.$maintenanceModeError=e.$maintenanceModeTable.find(t.maintenanceModeError),e},bindEvents:function(){var e=this.getSettings(),t=this.elements;t.$modeSelect.on("change",function(){t.$maintenanceModeTable.toggleClass(e.classes.isEnabled,!!t.$modeSelect.val()),t.$maintenanceModeDescriptions.hide(),t.$maintenanceModeDescriptions.filter('[data-value="'+t.$modeSelect.val()+'"]').show()}).trigger("change"),t.$excludeModeSelect.on("change",function(){t.$excludeRolesArea.toggle("custom"===t.$excludeModeSelect.val())}).trigger("change"),t.$templateSelect.on("change",function(){var e=t.$templateSelect.val();if(!e)return t.$editTemplateButton.hide(),void t.$maintenanceModeError.show();var a=QazanaAdminConfig.home_url+"?p="+e+"&qazana";t.$editTemplateButton.prop("href",a).show(),t.$maintenanceModeError.hide()}).trigger("change")}}),t.exports=n},{"qazana-utils/view-module":4}],3:[function(e,t,a){var n=function(){var e,t=jQuery,a=arguments,n=this,o={},i=function(){t.each(n,function(e){var t=n[e];"function"==typeof t&&(n[e]=function(){return t.apply(n,arguments)})})},s=function(){e=n.getDefaultSettings();var o=a[0];o&&t.extend(e,o)};this.getItems=function(e,t){if(t){var a=t.split("."),n=a.splice(0,1);if(!a.length)return e[n];if(!e[n])return;return this.getItems(e[n],a.join("."))}return e},this.getSettings=function(t){return this.getItems(e,t)},this.setSettings=function(a,o,i){if(i||(i=e),"object"==typeof a)return t.extend(i,a),n;var s=a.split("."),c=s.splice(0,1);return s.length?(i[c]||(i[c]={}),n.setSettings(s.join("."),o,i[c])):(i[c]=o,n)},this.forceMethodImplementation=function(e){var t=e.callee.name;throw new ReferenceError("The method "+t+" must to be implemented in the inheritor child.")},this.on=function(e,a){return"object"==typeof e?(t.each(e,function(e){n.on(e,this)}),n):(e.split(" ").forEach(function(e){o[e]||(o[e]=[]),o[e].push(a)}),n)},this.off=function(e,t){if(!o[e])return n;if(!t)return delete o[e],n;var a=o[e].indexOf(t);return-1!==a&&delete o[e][a],n},this.trigger=function(e){var a="on"+e[0].toUpperCase()+e.slice(1),i=Array.prototype.slice.call(arguments,1);n[a]&&n[a].apply(n,i);var s=o[e];return s?(t.each(s,function(e,t){t.apply(n,i)}),n):n},this.getDeviceName=function(){return jQuery("body").hasClass("mobile")?"mobile":jQuery("body").hasClass("tablet")?"tablet":""},n.__construct.apply(n,a),i(),s(),n.trigger("init")};n.prototype.__construct=function(){},n.prototype.getDefaultSettings=function(){return{}},n.extendsCount=0,n.extend=function(e){var t=jQuery,a=this,o=function(){return a.apply(this,arguments)};t.extend(o,a),(o.prototype=Object.create(t.extend({},a.prototype,e))).constructor=o;var i=++n.extendsCount;return o.prototype.getConstructorID=function(){return i},o.__super__=a.prototype,o},t.exports=n},{}],4:[function(e,t,a){var n;n=e("qazana-utils/module").extend({elements:null,getDefaultElements:function(){return{}},bindEvents:function(){},onInit:function(){this.initElements(),this.bindEvents()},initElements:function(){this.elements=this.getDefaultElements()}}),t.exports=n},{"qazana-utils/module":3}]},{},[1]);