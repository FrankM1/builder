!function a(t,e,n){function o(c,s){if(!e[c]){if(!t[c]){var r="function"==typeof require&&require;if(!s&&r)return r(c,!0);if(i)return i(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var l=e[c]={exports:{}};t[c][0].call(l.exports,function(a){var e=t[c][1][a];return o(e||a)},l,l.exports,a,t,e,n)}return e[c].exports}for(var i="function"==typeof require&&require,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(a,t,e){!function(a,t,e){"use strict";var n={cacheElements:function(){this.cache={$body:a("body"),$switchMode:a("#qazana-switch-mode"),$goToEditLink:a("#qazana-go-to-edit-page-link"),$switchModeInput:a("#qazana-switch-mode-input"),$switchModeButton:a("#qazana-switch-mode-button"),$qazanaLoader:a(".qazana-loader"),$qazanaEditor:a("#qazana-editor"),$importButton:a("#qazana-import-template-trigger"),$importArea:a("#qazana-import-template-area")}},toggleStatus:function(){var a="qazana"===this.getEditMode();this.cache.$body.toggleClass("qazana-editor-active",a).toggleClass("qazana-editor-inactive",!a)},bindEvents:function(){var n=this;n.cache.$switchModeButton.on("click",function(o){if(o.preventDefault(),"qazana"===n.getEditMode())n.cache.$switchModeInput.val("editor");else{n.cache.$switchModeInput.val("qazana");var i=a("#title");i.val()||i.val("Qazana #"+a("#post_ID").val()),wp.autosave.server.triggerSave(),n.animateLoader(),a(e).on("heartbeat-tick.autosave",function(){a(t).off("beforeunload.edit-post"),t.location=n.cache.$goToEditLink.attr("href")})}n.toggleStatus()}),n.cache.$goToEditLink.on("click",function(){n.animateLoader()}),a("div.notice.qazana-message-dismissed").on("click","button.notice-dismiss",function(t){t.preventDefault(),a.post(ajaxurl,{action:"qazana_set_admin_notice_viewed",notice_id:a(this).closest(".qazana-message-dismissed").data("notice_id")})}),a("#qazana-clear-css-cache-button").on("click",function(t){t.preventDefault();var e=a(this);e.removeClass("success").addClass("loading"),a.post(ajaxurl,{action:"qazana_clear_css_cache",_nonce:e.data("nonce")}).done(function(){e.removeClass("loading").addClass("success")})}),a("#qazana-library-sync-button").on("click",function(t){t.preventDefault();var e=a(this);e.removeClass("success").addClass("loading"),a.post(ajaxurl,{action:"qazana_reset_remote_library",_nonce:e.data("nonce")}).done(function(){e.removeClass("loading").addClass("success")})}),a("#qazana-replace-url-button").on("click",function(t){t.preventDefault();var e=a(this),n=e.parents("tr"),o=n.find('[name="from"]'),i=n.find('[name="to"]');e.removeClass("success").addClass("loading"),a.post(ajaxurl,{action:"qazana_replace_url",from:o.val(),to:i.val(),_nonce:e.data("nonce")}).done(function(a){e.removeClass("loading"),a.success&&e.addClass("success"),(new DialogsManager.Instance).createWidget("alert",{message:a.data}).show()})})},init:function(){this.cacheElements(),this.bindEvents(),this.initTemplatesImport()},initTemplatesImport:function(){if(this.cache.$body.hasClass("post-type-qazana_library")){var t=this,e=t.cache.$importButton,n=t.cache.$importArea;t.cache.$formAnchor=a("h1"),a("#wpbody-content").find(".page-title-action").after(e),t.cache.$formAnchor.after(n),e.on("click",function(){a("#qazana-import-template-area").toggle()})}},getEditMode:function(){return this.cache.$switchModeInput.val()},animateLoader:function(){this.cache.$goToEditLink.addClass("qazana-animate")}};a(function(){n.init()})}(jQuery,window,document)},{}]},{},[1]);